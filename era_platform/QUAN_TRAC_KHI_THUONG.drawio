<mxfile host="65bd71144e">
    <diagram id="WWGtIZI5LZUY-d4-wVYB" name="Page-1">
        <mxGraphModel dx="1460" dy="1337" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="136" value="" style="rounded=1;whiteSpace=wrap;html=1;arcSize=3;fillColor=none;dashed=1;dashPattern=12 12;" vertex="1" parent="1">
                    <mxGeometry x="2312" y="293.5" width="207" height="287" as="geometry"/>
                </mxCell>
                <mxCell id="48" value="" style="edgeStyle=none;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="45" target="47">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="45" value="Bắt đầu" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1015" y="58.5" width="102" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="50" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="47" target="49">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="47" value="Thông báo tới người dùng.&lt;br&gt;Set_Indicator_Flag(0x0)" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="963.5" y="128.5" width="205" height="44" as="geometry"/>
                </mxCell>
                <mxCell id="52" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="49" target="51">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="49" value="Lấy dữ liệu nhiệt độ và độ ẩm &lt;br&gt;từ cảm biến DHT11 và lưu vào biến t, h." style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="929" y="217.5" width="274" height="44" as="geometry"/>
                </mxCell>
                <mxCell id="55" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="51" target="53">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="65" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="51" target="64">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="51" value="t == NaN &lt;br&gt;hoặc&lt;br&gt;h == NaN " style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="992.5" y="309.5" width="147" height="129" as="geometry"/>
                </mxCell>
                <mxCell id="59" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="53" target="58">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="53" value="Serial.println(&quot;DHT11 - E: Corrupted data!&quot;)" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="1212" y="361.25" width="311" height="25.5" as="geometry"/>
                </mxCell>
                <mxCell id="54" value="Kết thúc" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1306" y="57" width="123" height="42.5" as="geometry"/>
                </mxCell>
                <mxCell id="60" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="58" target="54">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="58" value="Thông báo tới người dùng.&lt;br&gt;Set_Indicator_Flag(0x0)" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="1265" y="217.5" width="205" height="44" as="geometry"/>
                </mxCell>
                <mxCell id="61" value="Sai" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="1049" y="436.5" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="62" value="Đúng" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="1143" y="348.5" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="67" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="64" target="66">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="64" value="Gởi thông tin về nhiệt độ, độ ẩm qua Serial" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="945.75" y="479.5" width="240.5" height="43" as="geometry"/>
                </mxCell>
                <mxCell id="69" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="66" target="68">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="66" value="&lt;div&gt;Gởi thông tin về nhiệt độ, độ ẩm lên E-Ra IoT.&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="945.75" y="543.5" width="240.5" height="34" as="geometry"/>
                </mxCell>
                <mxCell id="76" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="68" target="71">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1173" y="646"/>
                            <mxPoint x="1176" y="627"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="68" value="&lt;div&gt;float wspeed = 0;&lt;/div&gt;&lt;div&gt;float wdirection = 0;&lt;/div&gt;&lt;div&gt;curr_t = millis();&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1006" y="619" width="120" height="53.5" as="geometry"/>
                </mxCell>
                <mxCell id="78" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="71" target="77">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="83" style="edgeStyle=none;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="71" target="81">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1596" y="628"/>
                            <mxPoint x="1596" y="721"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="71" value="last_t == 0&lt;br&gt;hoặc&lt;br&gt;last_t &amp;gt; curr_t" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1302" y="570.5" width="124" height="109" as="geometry"/>
                </mxCell>
                <mxCell id="79" style="edgeStyle=none;html=1;" edge="1" parent="1" source="77">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1371" y="155" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1364" y="454"/>
                            <mxPoint x="1585" y="455"/>
                            <mxPoint x="1581" y="155"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="77" value="&lt;div&gt;turn_count = 0;&lt;/div&gt;&lt;div&gt;last_t = curr_t;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1304" y="487" width="120" height="35.5" as="geometry"/>
                </mxCell>
                <mxCell id="80" value="Đúng" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="1353" y="540" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="85" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="81" target="84">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="81" value="wspeed = 0.667*turn_count/delta_seccond(last_t, curr_t);&lt;br&gt;&lt;div&gt;turn_count = 0;&lt;/div&gt;&lt;div&gt;last_t = curr_t;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1230" y="693.13" width="327.25" height="53.75" as="geometry"/>
                </mxCell>
                <mxCell id="88" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="84">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1069.25" y="766" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="84" value="&lt;div&gt;Gởi thông tin về tốc độ gió (wspeed) lên E-Ra IoT.&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="949" y="703" width="240.5" height="34" as="geometry"/>
                </mxCell>
                <mxCell id="92" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="89" target="91">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="89" value="Cật nhật giá trị ADC thành giá trị góc cho biến&amp;nbsp;wdirection." style="whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="949" y="1036.75" width="241" height="50.5" as="geometry"/>
                </mxCell>
                <mxCell id="100" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="91" target="99">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="91" value="&lt;div&gt;Gởi thông tin về hướng gió (wdirection) lên E-Ra IoT.&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="1281" y="1045" width="240.5" height="34" as="geometry"/>
                </mxCell>
                <mxCell id="97" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="93" target="96">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="93" value="Đọc giá trị ADC từ chân kết nối với cảm biến hướng gió và lưu vào biến&amp;nbsp;wdirection." style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="949" y="828" width="240.5" height="54" as="geometry"/>
                </mxCell>
                <mxCell id="95" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="94" target="93">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="94" value="&lt;div&gt;Gởi thông tin về tốc độ gió (wspeed) đến Serial.&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="949" y="767" width="240.5" height="34" as="geometry"/>
                </mxCell>
                <mxCell id="98" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="96" target="89">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="104" style="edgeStyle=none;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="96" target="102">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1398" y="954"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="96" value="Chuyển đổi &lt;br&gt;giá trị wdirection&lt;br&gt;thành giá trị&lt;br&gt;góc được?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1007.25" y="902" width="124" height="109" as="geometry"/>
                </mxCell>
                <mxCell id="108" style="edgeStyle=none;html=1;" edge="1" parent="1" source="99">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1581.9565217391305" y="847.3478260869567" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1582" y="996"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="99" value="Gởi thông tin về tốc độ gió (wdirection) đến Serial." style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="1281" y="979" width="240.5" height="34" as="geometry"/>
                </mxCell>
                <mxCell id="107" style="edgeStyle=none;html=1;" edge="1" parent="1" source="102">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1375.8695652173915" y="129.9565217391305" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1656" y="848"/>
                            <mxPoint x="1656" y="130"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="102" value="Thông báo tới người dùng.&lt;br&gt;Set_Indicator_Flag(0x4)" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="1295.0000000000002" y="826" width="205" height="44" as="geometry"/>
                </mxCell>
                <mxCell id="106" value="Sai" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="1113" y="931" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="113" value="" style="rounded=1;whiteSpace=wrap;html=1;arcSize=3;fillColor=none;dashed=1;dashPattern=12 12;" vertex="1" parent="1">
                    <mxGeometry x="1959.5" y="293.5" width="299.5" height="396.5" as="geometry"/>
                </mxCell>
                <mxCell id="114" value="" style="edgeStyle=none;html=1;" edge="1" source="115" target="117" parent="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="115" value="Khởi tạo các biến môi trường, các đối tượng và kết nối tới nền tảng E-Ra IoT" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="1731" y="337.5" width="197" height="63" as="geometry"/>
                </mxCell>
                <mxCell id="116" value="" style="edgeStyle=none;html=1;" edge="1" source="117" target="119" parent="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="117" value="Thiết lập các chân GPIO" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="1731" y="436.5" width="197" height="38" as="geometry"/>
                </mxCell>
                <mxCell id="118" value="" style="edgeStyle=none;html=1;" edge="1" source="119" target="122" parent="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1830.5" y="634.5"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="119" value="Thiết lập Serial giao tiếp với máy tính.&lt;br&gt;baund_rate=115200" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="1731" y="507.5" width="197" height="56" as="geometry"/>
                </mxCell>
                <mxCell id="120" style="edgeStyle=none;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" source="122" parent="1" target="123">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="2230.9615384615386" y="634.5" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="121" style="edgeStyle=none;html=1;" edge="1" source="122" parent="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="2119.5" y="529" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="122" value="1 == 1" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2079.5" y="594.5" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="123" value="Kết thúc" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="2392" y="612.5" width="80" height="44" as="geometry"/>
                </mxCell>
                <mxCell id="124" value="Sai" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="2145" y="611.5" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="126" style="edgeStyle=none;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" source="127" target="129" parent="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="127" value="Đồng bộ dữ liệu từ E-Ra IoT" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="2006" y="466.5" width="227" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="128" style="edgeStyle=none;html=1;" edge="1" source="129" parent="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1980.772727272727" y="633.7424242424242" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="2120.5" y="305.5"/>
                            <mxPoint x="1981.5" y="305.5"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="129" value="Cập nhật dữ liệu từ cảm biến và gởi dữ liệu đến E-Ra IoT" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
                    <mxGeometry x="2005.5" y="376.5" width="227" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="130" value="" style="edgeStyle=none;html=1;" edge="1" source="131" target="115" parent="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="131" value="&lt;div&gt;uint32_t last_t = 0;&lt;/div&gt;&lt;div&gt;uint32_t curr_t = 0;&lt;/div&gt;&lt;div&gt;uint32_t turn_count = 0;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1731" y="238" width="198" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="132" value="" style="edgeStyle=none;html=1;" edge="1" source="133" target="131" parent="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="133" value="Bắt đầu" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
                    <mxGeometry x="1778.5" y="157" width="102" height="41" as="geometry"/>
                </mxCell>
                <mxCell id="134" value="Vòng lặp chính" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=12 12;" vertex="1" parent="1">
                    <mxGeometry x="2145" y="298" width="112" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="135" value="" style="endArrow=classic;html=1;dashed=1;dashPattern=1 2;" edge="1" parent="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="2248" y="340.5" as="sourcePoint"/>
                        <mxPoint x="2416" y="367" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="2417" y="339"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="137" value="Chương trình ngắt mỗi khi có cạnh xuống của chân GPIO18" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=12 12;" vertex="1" parent="1">
                    <mxGeometry x="2323" y="300" width="192" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="141" style="edgeStyle=none;html=1;dashed=1;dashPattern=1 1;" edge="1" parent="1" source="140">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="2241" y="409" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="146" value="" style="edgeStyle=none;html=1;" edge="1" parent="1" source="140" target="145">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="140" value="digitalRead(18)&lt;br&gt;== LOW" style="rhombus;whiteSpace=wrap;html=1;fillColor=none;" vertex="1" parent="1">
                    <mxGeometry x="2343" y="368" width="145" height="81" as="geometry"/>
                </mxCell>
                <mxCell id="142" value="Sai" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="2301" y="387" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="143" value="Ngắt" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="2252" y="316" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="144" value="Tiếp&lt;br&gt;tục" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="2248" y="392.5" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="147" style="edgeStyle=none;html=1;dashed=1;dashPattern=1 1;" edge="1" parent="1" source="145">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="2303" y="407" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="2303" y="483"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="145" value="++turn_count" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" vertex="1" parent="1">
                    <mxGeometry x="2373.75" y="470" width="83.5" height="27" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>